<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover Kasaragod's Culture</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Leaflet Routing Machine CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/navbar.css">
</head>
<body>

<nav>
    <div class="nav-left">
        <button class="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links">
            <a href="index.html" class="active">Home</a>
            <a href="cuisine.html">Cuisine</a>
            <a href="experience.html">Experiences</a>
            <a href="events.html">Events</a>
            <a href="house.html">Houseboats</a>
            <a href="arts-artisans.html">Art & Artisans</a>
            <a href="made-in-kasaragod.html">Made in Kasaragod</a>
        </div>
    </div>
    <div class="search-wrapper">
        <input type="text" id="searchInput" placeholder="Search...">
        <i class="fas fa-search search-icon"></i>
        <div class="search-suggestions"></div>
    </div>
</nav>

<div class="hero-container">
    <div class="hero-content">
        <a href="#art">
            <h1>
                <span class="title-top">what next?</span>
                <span class="title-main">Kasaragod.</span>
                <span class="title-arrow">&darr;</span>
            </h1>
        </a>
    </div>
    <section class="hero">
        <div class="splide" id="main-slider">
            <div class="splide__track">
                <ul class="splide__list">
                    <li class="splide__slide">
                        <a href="bekal.html">
                            <img src="images/maha.jpg" alt="Bekal Fort">
                        </a>
                    </li>
                    <li class="splide__slide">
                        <img src="images/Anantapura_Lake_Temple.jpg" alt="Anantapura Lake Temple">
                    </li>
                    <li class="splide__slide">
                        <img src="images/Asap.jpg" alt="ASAP">
                    </li>
                    <li class="splide__slide">
                        <img src="images/bekalfort front.jpg" alt="Bekal Fort">
                    </li>
                    <li class="splide__slide">
                        <img src="images/yaks.jpg" alt="Heritage Image">
                    </li>
                    <li class="splide__slide">
                        <img src="images/baclklk.jpg" alt="Kasaragod Heritage">
                    </li>
                    <li class="splide__slide">
                        <img src="images/Theyyam.jpg" alt="Theyyam Performance">
                    </li>
                </ul>
            </div>
        </div>
    </section>
</div>

<section class="section" id="art">
    <h2>Cultural Heritage</h2>
    <p>Explore the rich cultural heritage of Kasaragod</p>
    
    <div class="filter-container">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="temple">sanctuary</button>
        <button class="filter-btn" data-filter="fort">Forts</button>
        <button class="filter-btn" data-filter="culture">Culture</button>
        <button class="filter-btn" data-filter="nature">Nature</button>
        <button class="filter-btn" data-filter="ksdp">Products of Kasaragod</button>
    </div>

    <div class="cards">
        <div class="card" data-category="all">
            <img src="images/Asap.jpg" alt="ASAP">
            <div class="card-content">
                <h3>ASAP Community Skill Park</h3>
                <p>A center for skill development and vocational training in Kasaragod.</p>
            </div>
            <div class="card-buttons">
                <button onclick="showOnMap(12.5182, 75.0141, 'ASAP Community Skill Park')">Show on Map</button>
                <a href="https://wa.me/9447326319">Contact on WhatsApp</a>
            </div>
        </div>

        <div class="card" data-category="sanctuary">
            <img src="images/Anantapura_Lake_Temple.jpg" alt="Anantapura Lake Temple">
            <div class="card-content">
                <h3>Anantapura Lake Temple</h3>
                <p>Ancient lake temple known for its unique architecture and peaceful surroundings.</p>
            </div>
            <div class="card-buttons">
                <button onclick="showOnMap(12.5182, 75.0141, 'Anantapura Lake Temple')">Show on Map</button>
                <a href="anantapura.html">Show more details</a>
            </div>
        </div>

        <div class="card" data-category="All">
            <img src="images/houseb.jpeg" alt="Nileshwar HouseBoat">
            <div class="card-content">
                <h3>Nileshwar HouseBoats</h3>
                <p>Enjoy the nature with nileshwar houseboat.</p>
            </div>
            <div class="card-buttons">
                <button onclick="location.href='house.html'">Book your houseboat Trip</button>
                <a href="https://wa.me/9846913111">Contact on WhatsApp</a>
            </div>
        </div>

        <div class="card" data-category="fort">
            <img src="images/bekalfort front.jpg" alt="Bekal Fort">
            <div class="card-content">
                <h3>Bekal Fort</h3>
                <p>The largest and best-preserved fort in Kerala, offering stunning views of the Arabian Sea.</p>
            </div>
            <div class="card-buttons">
                <button onclick="showOnMap(12.3917, 75.0328, 'Bekal Fort')">Show on Map</button>
                <a href="https://wa.me/+91 4672 950 500">Contact on WhatsApp</a>
            </div>
        </div>
    </div>
</section>

<section class="map-section">
    <div class="map-container">
        <h2>Find Cultural Locations</h2>
        <div id="map"></div>
        <div id="location-info"></div>
    </div>
</section>

<footer>
    <p>&copy; 2024 Cultural Heritage Platform. Built for Kasaragod.</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
<script src="js/script.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script>
    const map = L.map('map').setView([12.4280 , 75.3616], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    const bekalFort = [12.4280, 75.3616];

    L.marker(bekalFort).addTo(map)
        .bindPopup("Bekal Fort")
        .openPopup();

    function getUserLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                const userLocation = [latitude, longitude];
                L.marker(userLocation).addTo(map)
                    .bindPopup("You are here!")
                    .openPopup();

                map.setView(userLocation, 13);
                document.getElementById('location-info').innerHTML = `
                    Latitude: ${latitude}<br>
                    Longitude: ${longitude}
                `;
                calculateDistance(userLocation, bekalFort);
                showDirections(userLocation, bekalFort);

            }, function(error) {
                alert("Error getting location: " + error.message);
            });
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }

    function calculateDistance(userLocation, destination) {
        const lat1 = userLocation[0];
        const lon1 = userLocation[1];
        const lat2 = destination[0];
        const lon2 = destination[1];

        const rad = Math.PI / 180;
        const dLat = (lat2 - lat1) * rad;
        const dLon = (lon2 - lon1) * rad;

        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                  Math.cos(lat1 * rad) * Math.cos(lat2 * rad) *
                  Math.sin(dLon / 2) * Math.sin(dLon / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

        const R = 6371;
        const distance = R * c;

        document.getElementById('location-info').innerHTML += `
            <br>Distance to Bekal Fort: ${distance.toFixed(2)} km
        `;
    }

    function showDirections(userLocation, destination) {
        L.Routing.control({
            waypoints: [
                L.latLng(userLocation[0], userLocation[1]),
                L.latLng(destination[0], destination[1])
            ],
            routeWhileDragging: true
        }).addTo(map);
    }

    getUserLocation();
</script>

<script src="js/menu-toggle.js"></script>
</body>
</html>
